(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-kefu-index"],{"312b":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var i={uniParser:a("c5fe").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"kefu_container"},[e.errorTips?a("v-uni-view",{staticClass:"error_tips"},[e._v(e._s(e.errorTips))]):e._e(),e.config.announcement&&""==e.errorTips?a("v-uni-view",{staticClass:"notice x-start"},[a("v-uni-text",[e._v(e._s(e.config.announcement))]),a("v-uni-text",{staticClass:"close_notice cuIcon-roundclose y-end",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close_notice.apply(void 0,arguments)}}})],1):e._e(),e.showLeaveMessage?a("v-uni-view",{staticClass:"leave_message"},[a("v-uni-form",[a("v-uni-view",{staticClass:"form-group"},[a("v-uni-label",{staticClass:"control-label",attrs:{for:"c-name"}},[a("v-uni-view",{staticClass:"label-title"},[e._v("姓名")]),a("v-uni-input",{staticClass:"form-control",attrs:{type:"text",name:"name",id:"c-name","placeholder-style":"color:#B1B3C7",placeholder:"请输入您的姓名"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.leave_message.apply(void 0,arguments)}},model:{value:e.leaveMessage.name,callback:function(t){e.$set(e.leaveMessage,"name",t)},expression:"leaveMessage.name"}})],1)],1),a("v-uni-view",{staticClass:"form-group"},[a("v-uni-label",{staticClass:"control-label",attrs:{for:"c-contact"}},[a("v-uni-view",{staticClass:"label-title"},[e._v("联系方式")])],1),a("v-uni-input",{staticClass:"form-control",attrs:{type:"text",name:"contact",id:"c-contact","placeholder-style":"color:#B1B3C7",placeholder:"请输入手机/QQ/微信号"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.leave_message.apply(void 0,arguments)}},model:{value:e.leaveMessage.contact,callback:function(t){e.$set(e.leaveMessage,"contact",t)},expression:"leaveMessage.contact"}})],1),a("v-uni-view",{staticClass:"form-group"},[a("v-uni-label",{staticClass:"control-label",attrs:{for:"c-message"}},[a("v-uni-view",{staticClass:"label-title"},[e._v("留言内容")])],1),a("v-uni-textarea",{staticClass:"form-control",staticStyle:{height:"240rpx"},attrs:{rows:"5",name:"message",id:"c-message","placeholder-style":"color:#B1B3C7",placeholder:"遇到的问题、所需服务、产品等，我们将尽快与您取得联系"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.leave_message.apply(void 0,arguments)}},model:{value:e.leaveMessage.message,callback:function(t){e.$set(e.leaveMessage,"message",t)},expression:"leaveMessage.message"}})],1),a("v-uni-button",{staticClass:"leave_success cu-btn",attrs:{type:"button"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.post_leave_message.apply(void 0,arguments)}}},[e._v("确认留言")])],1)],1):e._e(),e.showLeaveMessage?e._e():a("v-uni-view",{staticClass:"content_wrapper",style:{height:"calc(100vh - var(--window-top) - "+e.writeBottom+"px)"}},[a("v-uni-view",{staticClass:"chat_wrapper",style:{height:"calc(100% - "+e.wrapperHeight+"px)"}},[e.showTool||e.selectModel?a("v-uni-view",{staticClass:"mask",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideMask.apply(void 0,arguments)}}}):e._e(),a("v-uni-scroll-view",{attrs:{"scroll-y":!0,"scroll-with-animation":!0,"scroll-into-view":e.scrollIntoFooter},on:{scrolltoupper:function(t){arguments[0]=t=e.$handleEvent(t),e.wrapper_scrolltoupper.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.tap_scroll_view.apply(void 0,arguments)}}},[e._l(e.messageList,(function(t,i){return[a("v-uni-view",{key:i+"_0",staticClass:"status"},[a("v-uni-text",[e._v(e._s(t.datetime))])],1),e._l(t.data,(function(t){return[3==t.message_type?a("v-uni-view",{key:t.id+"_0",staticClass:"status"},[a("v-uni-text",[e._v(e._s(t.message))])],1):e._e(),a("v-uni-view",{key:t.id+"_1",staticClass:"message-item x-f",class:"me"==t.sender?"message__right":"message__left"},[a("v-uni-view",{staticClass:"head-img"},["you"==t.sender?a("v-uni-image",{staticClass:"head-img",attrs:{src:"/static/imgs/kefu/sys_head.png",mode:""}}):e._e()],1),3!=t.message_type?a("v-uni-view",{staticClass:"bubble",class:"me"==t.sender?"me":"you"},[0==t.message_type?a("uni-parser",{attrs:{"tag-style":{img:"width:50rpx;height:50rpx;"},html:t.message},on:{imgtap:function(t){arguments[0]=t=e.$handleEvent(t),e.message_img_preview.apply(void 0,arguments)}}}):e._e(),2==t.message_type?a("uni-parser",{attrs:{html:"<a target=_blank href="+t.message+">"+t.message+"</a>"}}):e._e(),1==t.message_type?a("v-uni-image",{attrs:{src:t.message,mode:"widthFix"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.preview_img(t.message)}}}):e._e(),4==t.message_type||5==t.message_type?a("v-uni-view",{staticClass:"project_item",staticStyle:{margin:"0"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.goDetail(t.message)}}},[a("v-uni-image",{attrs:{src:t.message.logo}}),a("v-uni-view",{staticClass:"project_item_body y-bc"},[a("v-uni-view",[a("v-uni-view",{staticClass:"project_item_title more-t"},[e._v(e._s(t.message.subject))]),t.message.note?a("v-uni-view",{staticClass:"project_item_note one-t",staticStyle:{width:"280rpx","margin-right":"-20rpx"}},[e._v(e._s(t.message.note))]):e._e()],1),a("v-uni-view",{staticClass:"project_item_price"},[t.message.price?a("v-uni-text",{staticClass:"price"},[e._v("￥"+e._s(t.message.price))]):e._e()],1)],1)],1):e._e()],1):e._e(),a("v-uni-view",{staticClass:"head-img"},["me"==t.sender?a("v-uni-image",{staticClass:"head-img",attrs:{src:e.userInfo.avatar,mode:""}}):e._e()],1)],1)]}))]})),a("v-uni-view",{attrs:{id:"wrapper_footer"}})],2)],1),a("v-uni-view",{staticClass:"write",style:{bottom:e.writeBottom+"px"}},[e.selectModel?e._e():a("v-uni-label",{staticClass:"widget_textarea"},[a("v-uni-textarea",{staticClass:"kefu_message",attrs:{"adjust-position":!1,"show-confirm-bar":!1,fixed:!0,focus:e.kefuMessageFocus,"auto-height":!0,maxlength:"-1","cursor-spacing":14,placeholder:"请输入你要咨询的问题","placeholder-style":"color:#999"},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e.kefu_message_blur.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.textarea_input.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.textarea_focus.apply(void 0,arguments)}},model:{value:e.kefuMessage,callback:function(t){e.kefuMessage=t},expression:"kefuMessage"}})],1),a("v-uni-view",{staticClass:"write_right",style:{flex:e.showSendButton?3:2}},[e.config.toolbar&&e.config.toolbar.expression?a("v-uni-text",{staticClass:"toolbar_icon smiley",style:{background:"url("+e.config.toolbar.expression.icon_image+") no-repeat","background-size":"100% 100%"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.show_tool("smiley")}}}):e._e(),e.showSendButton?a("v-uni-button",{staticClass:"send_btn",attrs:{"hover-class":"send_btn_hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.send_message(e.kefuMessage,0)}}},[e._v("发送")]):e._e(),!e.showSendButton&&e.attachBackground?a("v-uni-text",{staticClass:"toolbar_icon attach",style:{background:"url("+e.attachBackground+") no-repeat","background-size":"100% 100%"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.show_tool("more")}}}):e._e()],1)],1),e.showTool?a("v-uni-view",{staticClass:"footer_div"},[e._l(e.expressionData,(function(t,i){return"smiley"==e.showTool?[a("v-uni-image",{key:i+"_0",attrs:{src:t.src},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.select_expression(t.title)}}})]:e._e()})),"more"==e.showTool?a("v-uni-view",{staticClass:"toolbar"},[e.config.toolbar&&e.config.toolbar.order?a("v-uni-view",{staticClass:"toolbar_item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.show_select_model("order")}}},[a("v-uni-image",{staticClass:"tool-img",attrs:{src:"/static/imgs/kefu/kefu_order.png"}}),a("v-uni-view",[e._v(e._s(e.config.toolbar.order.title))])],1):e._e(),e.config.toolbar&&e.config.toolbar.goods?a("v-uni-view",{staticClass:"toolbar_item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.show_select_model("goods")}}},[a("v-uni-image",{staticClass:"tool-img",attrs:{src:"/static/imgs/kefu/kefu_goods.png"}}),a("v-uni-view",[e._v(e._s(e.config.toolbar.goods.title))])],1):e._e(),e.config.toolbar&&e.config.toolbar.file?a("v-uni-view",{staticClass:"toolbar_item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload_file.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"tool-img",attrs:{src:"/static/imgs/kefu/kefu_file.png"}}),a("v-uni-view",[e._v(e._s(e.config.toolbar.file.title))])],1):e._e()],1):e._e()],2):e._e()],1),e.selectModel?a("v-uni-view",{staticClass:"select_model"},[a("v-uni-view",{staticClass:"x-bc select_model--head"},[a("v-uni-view",{staticClass:"select-title-box y-f"},[a("v-uni-view",{staticClass:"title-text"},[e._v(e._s(e.selectModelType[e.selectModel]))]),a("v-uni-text",{staticClass:"title-line"})],1),a("v-uni-view",{staticClass:"close_select",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.show_select_model(!1)}}},[a("v-uni-text",{staticClass:"cuIcon-roundclose"})],1)],1),a("v-uni-view",{staticClass:"project_list"},[e.selectModelData.length>0?a("v-uni-radio-group",{staticStyle:{width:"100%"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.select_done.apply(void 0,arguments)}}},e._l(e.selectModelData,(function(t,i){return a("v-uni-label",{key:i,staticClass:"project_item"},[a("v-uni-image",{attrs:{src:t.logo}}),a("v-uni-view",{staticClass:"project_item_body y-bc"},[a("v-uni-view",[a("v-uni-view",{staticClass:"project_item_title more-t"},[e._v(e._s(t.subject))]),t.note?a("v-uni-view",{staticClass:"project_item_note one-t",staticStyle:{width:"470rpx"}},[e._v(e._s(t.note))]):e._e()],1),a("v-uni-view",{staticClass:"project_item_price"},[t.price?a("v-uni-text",{staticClass:"price"},[e._v(e._s(t.price))]):e._e()],1)],1),a("v-uni-radio",{staticStyle:{opacity:"0",width:"0",height:"0"},attrs:{value:i.toString(),checked:!1,hide:!0}})],1)})),1):e._e(),e.selectModelData.length<=0?a("v-uni-view",{staticClass:"select_model_no_data"},[a("v-uni-text",[e._v("没有更多记录了...")])],1):e._e()],1)],1):e._e()],1)],1)},s=[]},"370c":function(e,t,a){var i=a("a43c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("59b88246",i,!0,{sourceMap:!1,shadowMode:!1})},7313:function(e,t,a){"use strict";(function(e){var i=a("4ea4");a("99af"),a("c975"),a("26e9"),a("e25e"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("841c"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("5530")),s=i(a("b0b2")),n=a("2f62"),r=(uni.getStorageSync("token"),""),d=null,l={components:{},data:function(){return{leaveMessage:{name:"",contact:"",message:""},attachBackground:"",showSendButton:!1,showTool:!1,showLeaveMessage:!1,expressionData:[],scrollIntoFooter:"",config:[],tokenList:[],kefuMessage:"",wrapperHeight:46,ws:{SocketTask:null,Timer:null,ErrorMsg:[],MaxRetryCount:3,CurrentRetryCount:0,socketOpen:!1,pageHideCloseWs:!0,unloadCloseWs:!1},csr:"",sessionId:0,sessionUser:"",kefuMessageFocus:!1,messageList:[],chatRecordPage:1,errorTips:"链接中...",selectModel:!1,selectModelType:{goods:"发送商品",order:"发送订单"},selectModelData:[],writeBottom:0}},computed:(0,o.default)({},(0,n.mapState)({userInfo:function(e){return e.user.userInfo}})),onLoad:function(e){r=e.fixed_csr?e.fixed_csr:r,this.load()},onShow:function(){this.ws.pageHideCloseWs||(this.ws.pageHideCloseWs=!0)},onHide:function(){},onUnload:function(){this.ws.SocketTask&&this.ws.socketOpen&&(e.log("页面卸载主动关闭链接"),this.ws.unloadCloseWs=!0,uni.closeSocket())},methods:{jump:function(e,t){this.$Router.push({path:e,query:t})},goDetail:function(e){e.number?this.jump("/pages/order/detail",{id:e.id}):this.jump("/pages/goods/detail/index",{id:e.id})},hideMask:function(){this.showTool&&(this.showTool=!1),this.selectModel&&(this.selectModel=!1),this.writeBottom=0},load:function(){var t=this,a="";try{a=uni.getStorageSync("kefu_tourists_token");a||(a="")}catch(i){e.error(i)}uni.request({url:t.build_url("initialize"),data:{token:uni.getStorageSync("token"),kefu_tourists_token:a,fixed_csr:r},success:function(a){if(1==a.data.code){if(a.data.data.token_list.kefu_tourists_token)try{uni.setStorageSync("kefu_tourists_token",a.data.data.token_list.kefu_tourists_token)}catch(i){e.error(i)}d=uni.createInnerAudioContext(),d.src=t.build_url("message_prompt");var o="";try{o=uni.getStorageSync("kefu_notice")}catch(i){e.log(i)}o==a.data.data.config.announcement&&(a.data.data.config.announcement=""),t.config=a.data.data.config,t.tokenList=a.data.data.token_list,a.data.data.new_msg&&t.new_message_prompt();var n=s.default.https_switch?"https://":"http://",r={};for(var l in s.default.expression)r[l]={src:n+s.default.baseURL+"/assets/addons/kefu/img"+s.default.expression[l].src,title:s.default.expression[l].title};t.expressionData=r,t.attachBackground=t.build_url("res","/img/more.png"),t.connect_socket()}else uni.showModal({content:a.data.msg,showCancel:!1,success:function(e){e.confirm&&uni.navigateBack({delta:1})}})},fail:function(e){uni.showModal({title:"温馨提示",content:"在线客服初始化失败,请重试~",showCancel:!1}),t.errorTips="初始化失败"}})},switch_show_tool:function(e){e?(this.showTool=e,this.writeBottom=170,this.scroll_into_footer(200)):(this.showTool=!1,this.writeBottom=0)},close_notice:function(){uni.setStorageSync("kefu_notice",this.config.announcement),this.config.announcement=""},select_done:function(e){var t=e.detail.value,a="";for(var i in this.selectModelData[t])a+=i+"="+this.selectModelData[t][i]+"#";this.send_message(a,"goods"==this.selectModel?4:5),this.selectModel=!1,this.switch_show_tool(!1)},show_select_model:function(t){var a=this;if(this.selectModel=t,t){uni.showLoading({title:"请稍后..."});var i=this.config.toolbar[t].data_api,o=new RegExp("(^https?://)","i");-1===i.search(o)&&(i=(s.default.https_switch?"https://":"http://")+s.default.baseURL+i),this.selectModelData=[],uni.request({url:i,data:{token:uni.getStorageSync("token")},success:function(t){1==t.data.code?(e.log(t.data.data),a.selectModelData=t.data.data.data):uni.showModal({title:"温馨提示",content:t.data.msg,showCancel:!1})},fail:function(e){uni.showModal({title:"温馨提示",content:"网络请求失败，请重试！",showCancel:!1})},complete:function(e){uni.hideLoading()}})}},parseUrl:function(e){var t=new RegExp("(https?://)([0-9a-z.]+)([?0-9a-z&=]+)?(#[0-9-a-z]+)?","g");return e.replace(t,'<a target="_blank" title="$&" class="link" href="$&">$&</a>')},message_img_preview:function(e){this.ws.pageHideCloseWs=!1},preview_img:function(e){this.ws.pageHideCloseWs=!1,uni.previewImage({current:e,urls:[e]})},upload_file:function(){var e=this;e.ws.pageHideCloseWs=!1,uni.chooseImage({success:function(t){var a=t.tempFilePaths;uni.showLoading({title:"正在上传..."});var i=uni.uploadFile({url:e.build_url("upload"),file:t.tempFiles[0],filePath:a[0],name:"file",formData:{token:uni.getStorageSync("token")},success:function(t){uni.hideLoading(),e.ws.pageHideCloseWs=!0,t=JSON.parse(t.data),1==t.code?(e.send_message(t.data.url,1),e.switch_show_tool(!1),e.kefuMessageFocus=!0):uni.showModal({title:"温馨提示",content:t.msg,showCancel:!1})},complete:function(e){uni.hideLoading()}});i.onProgressUpdate((function(e){uni.showLoading({title:e.progress+"%"})}))}})},connect_socket:function(){var t=this;this.ws.SocketTask&&this.ws.socketOpen?e.log("无需链接"):(t.ws.SocketTask=uni.connectSocket({url:this.build_url("ws"),header:{"content-type":"application/json"},complete:function(e){}}),uni.onSocketOpen((function(a){for(var i in e.log("链接已打开"),t.ws.socketOpen=!0,t.ws.CurrentRetryCount=0,t.ws.ErrorMsg)t.ws_send(t.ws.ErrorMsg[i]);t.ws.ErrorMsg=[],t.errorTips="",null!=t.ws.Timer&&clearInterval(t.ws.Timer),t.ws.Timer=setInterval(t.ws_send,28e3)})),uni.onSocketMessage((function(e){var a=JSON.parse(e.data);t.domsg(a)})),uni.onSocketError((function(a){t.ws.socketOpen=!1,t.errorTips="WebSocket 发生错误!",e.log("链接出错",a)})),uni.onSocketClose((function(a){e.log("链接已关闭",a),t.ws.socketOpen=!1,1e3==a.code||1e4==a.code||t.ws.unloadCloseWs||(null!=t.ws.Timer&&clearInterval(t.ws.Timer),t.ws.socketOpen=!1,-1===t.errorTips.indexOf("重连")&&(t.errorTips="网络链接已断开!"),t.ws.MaxRetryCount&&(t.ws.Timer=setInterval(t.retry_websocket,3e3)))})))},retry_websocket:function(){var e=this;e.ws.CurrentRetryCount<e.ws.MaxRetryCount?(e.ws.CurrentRetryCount++,e.connect_socket(),e.errorTips="重连WebSocket第"+e.ws.CurrentRetryCount+"次"):(null!=e.ws.Timer&&clearInterval(e.ws.Timer),e.errorTips="每隔10秒将再次尝试重连 WebSocket",e.ws.Timer=setInterval(e.connect_socket,1e4))},ws_send:function(t){var a=this;t||(t={c:"Message",a:"ping"}),a.ws.SocketTask&&a.ws.socketOpen?uni.sendSocketMessage({data:JSON.stringify(t)}):(e.log("消息发送出错",t,a.ws.SocketTask,a.ws.socketOpen),a.ws.ErrorMsg.push(t))},send_message:function(e,t){var a=this;if(""!=e)if(a.ws.SocketTask&&a.ws.socketOpen)if(a.sessionId){if(0==t){e=a.parseUrl(e);var i=/\[(.+?)\]/g,o=e.match(i);if(o)for(var s in o){var n=a.find_emoji(o[s]);e=e.replace(n.title,a.build_chat_img(n.src,"","emoji"))}}var r={c:"Message",a:"sendMessage",data:{message:e,message_type:t,session_id:a.sessionId,modulename:"index"}};a.ws_send(r);var d=a.messageList[a.messageList.length-1].data,l=d[d.length-1].id+1,c={id:l,sender:"me",message:e,message_type:t},g=a.messageList.length-1;a.messageList[g]&&"刚刚"==a.messageList[g].datetime?a.messageList[g].data=a.messageList[g].data.concat(a.format_message([c])):a.messageList=a.messageList.concat({datetime:"刚刚",data:a.format_message([c])}),a.kefuMessage="",a.kefu_message_change(),a.scroll_into_footer(300),a.wrapperHeight=46}else uni.showToast({title:"请选择一个会话~",icon:"none"});else uni.showToast({title:"网络链接异常，请稍后重试~",icon:"none"});else uni.showToast({title:"请输入消息内容",icon:"none"})},find_emoji:function(e){for(var t in this.expressionData)if(this.expressionData[t].title==e)return this.expressionData[t];return!1},build_chat_img:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"emoji";s.default.https_switch;return"emoji"==a?'<img class="emoji" src="'+e+'" />':'<img class="'+a+'" src="'+e+'" />'},leave_message:function(e){"c-name"==e.currentTarget.id?this.leaveMessage.name=e.detail.value:"c-contact"==e.currentTarget.id?this.leaveMessage.contact=e.detail.value:"c-message"==e.currentTarget.id&&(this.leaveMessage.message=e.detail.value)},post_leave_message:function(){if(!this.leaveMessage.contact)return uni.showToast({title:"联系方式不能为空哦~",icon:"none"}),!1;var e={c:"Message",a:"leaveMessage",data:this.leaveMessage};this.ws_send(e)},domsg:function(e){var t=this;if("initialize"==e.msgtype){e.data.new_msg&&t.new_message_prompt();var a={c:"Message",a:"userInitialize",data:{fixed_csr:t.fixedCsr}};t.ws_send(a)}else if("user_initialize"==e.msgtype)1==e.code?(e.data.session.user_tourists&&(t.send_message=function(){uni.showToast({title:"为保护您的隐私请,请登录后发送消息~",icon:"none"})}),t.csr=e.data.session.csr,t.sessionId=e.data.session.id,t.showLeaveMessage=!1,uni.setNavigationBarTitle({title:"客服 "+e.data.session.nickname+" 为您服务"})):302==e.code&&(t.csr?uni.showToast({title:"当前客服暂时离开,您可以直接发送离线消息~",icon:"none"}):(t.csr="none",t.showLeaveMessage=!0,uni.setNavigationBarTitle({title:"当前无客服在线哦~"})));else if("show_msg"==e.msgtype)uni.showToast({title:e.msg,icon:"none"});else if("leave_message"==e.msgtype)uni.showToast({title:e.msg,icon:"none"}),this.leaveMessage={name:"",contact:"",message:""};else if("clear"==e.msgtype){e.msg&&uni.showToast({title:e.msg,icon:"none"});var i={c:"Message",a:"clear"};t.ws_send(i),t.retry_webSocket=function(){clearInterval(t.ws.Timer)}}else if("offline"==e.msgtype)e.user_id==t.csr&&(this.errorTips="客服离线~");else if("online"==e.msgtype){if("admin"==e.modulename)if(e.user_id==t.csr)this.errorTips="";else if("none"==t.csr){a={c:"Message",a:"userInitialize"};t.ws_send(a)}}else if("csr_change_status"==e.msgtype)t.csr==e.data.csr&&(3!=e.data.csr_status?t.errorTips="客服"+t.get_csr_status(e.data.csr_status)+"~":t.errorTips="");else if("transfer_done"==e.msgtype)t.csr=e.data.csr,uni.setNavigationBarTitle({title:"客服 "+e.data.nickname+" 为您服务"});else if("new_message"==e.msgtype){if(t.new_message_prompt(),e.data.session_id==t.sessionId){var o=t.messageList.length-1;"刚刚"==t.messageList[o].datetime?t.messageList[o].data=t.messageList[o].data.concat(t.format_message([e.data])):t.messageList=t.messageList.concat({datetime:"刚刚",data:t.format_message([e.data])});var s={c:"Message",a:"readMessage",data:{record_id:e.data.record_id}};t.ws_send(s),t.scroll_into_footer(800)}}else if("chat_record"==e.msgtype){for(var n in t.chatRecordPage=e.data.next_page,e.data.chat_record)e.data.chat_record[n].data=t.format_message(e.data.chat_record[n].data);if(1==e.data.page)t.messageList=e.data.chat_record,t.scroll_into_footer(800);else for(var r=e.data.chat_record.length-1;r>=0;r--)e.data.chat_record[r].data.reverse(),t.messageList.unshift(e.data.chat_record[r])}},get_csr_status:function(e){switch(parseInt(e)){case 0:e="离线";break;case 1:e="繁忙";break;case 2:e="离开";break;case 3:e="在线";break;case 99:e="断链";break;default:e="未知";break}return e},build_url:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws",t=arguments.length>1?arguments[1]:void 0,a=this,i=s.default.https_switch?"https://":"http://";switch(e){case"ws":var o="&token="+(a.tokenList.kefu_token?a.tokenList.kefu_token:""),n="&kefu_user="+(a.tokenList.kefu_tourists_token?a.tokenList.kefu_tourists_token:"");return i=1==parseInt(a.config.wss_switch)?"wss://":"ws://",(i+s.default.baseURL+":"+a.config.websocket_port+"/?modulename=index"+o+n).replace(/\|/g,"~");case"initialize":return i+s.default.baseURL+"/addons/kefu/index/initialize?modulename=index";case"upload":return i+s.default.baseURL+"/addons/kefu/index/upload?modulename=index";case"message_prompt":return a.config.__CDN__?a.config.__CDN__+"/assets/addons/kefu/audio/message_prompt.wav":i+s.default.baseURL+"/assets/addons/kefu/audio/message_prompt.wav";case"res":return a.config.__CDN__?a.config.__CDN__+"/assets/addons/kefu"+t:i+s.default.baseURL+"/assets/addons/kefu"+t}},new_message_prompt:function(){d?(d.play(),setTimeout((function(){d.stop()}),1e3)):e.error("来信提示音播放失败！")},scroll_into_footer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;setTimeout((function(){t.scrollIntoFooter="wrapper_footer"}),e),t.scrollIntoFooter=""},wrapper_scrolltoupper:function(){if(this.sessionId&&"done"!=this.chatRecordPage){var e={c:"Message",a:"chatRecord",data:{session_id:this.sessionId,page:this.chatRecordPage}};this.ws_send(e)}},tap_scroll_view:function(){this.switch_show_tool(!1)},show_tool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smiley";this.showTool==e?this.switch_show_tool(!1):this.switch_show_tool(e),this.showTool&&this.scroll_into_footer()},textarea_focus:function(t){var a=this;this.showTool=!1,e.log("获取焦点",t),a.writeBottom=t.detail.height?t.detail.height:0},textarea_input:function(e){this.kefuMessage=e.detail.value,this.kefu_message_change()},kefu_message_change:function(){var e=this;this.showSendButton=""!=this.kefuMessage;var t=uni.createSelectorQuery().select(".write");t.fields({size:!0},(function(t){t.height!=e.wrapperHeight&&(e.wrapperHeight=t.height)})).exec()},kefu_message_blur:function(){this.kefuMessageFocus=!1,this.showTool||(this.writeBottom=0)},select_expression:function(e){this.kefuMessage=this.kefuMessage+e,this.kefu_message_change()},format_message:function(e){for(var t in e)if(4==e[t].message_type||5==e[t].message_type){var a=e[t].message.split("#"),i={};for(var o in a){var s=a[o].split("=");"undefined"!=typeof s[1]&&(i[s[0]]=s[1])}e[t].message=i}return e}}};t.default=l}).call(this,a("5a52")["default"])},8092:function(e,t,a){a("ac1f"),a("1276");var i={errorImg:null,filter:null,highlight:null,onText:null,entities:{quot:'"',apos:"'",semi:";",nbsp:" ",ensp:" ",emsp:" ",ndash:"–",mdash:"—",middot:"·",lsquo:"‘",rsquo:"’",ldquo:"“",rdquo:"”",bull:"•",hellip:"…"},blankChar:o(" , ,\t,\r,\n,\f"),boolAttrs:o("allowfullscreen,autoplay,autostart,controls,ignore,loop,muted"),blockTags:o("address,article,aside,body,caption,center,cite,footer,header,html,nav,pre,section"),ignoreTags:o("area,base,canvas,frame,iframe,input,link,map,meta,param,script,source,style,svg,textarea,title,track,wbr"),richOnlyTags:o("a,colgroup,fieldset,legend,table"),selfClosingTags:o("area,base,br,col,circle,ellipse,embed,frame,hr,img,input,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),trustTags:o("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,ul,video"),userAgentStyles:{address:"font-style:italic",big:"display:inline;font-size:1.2em",blockquote:"background-color:#f6f6f6;border-left:3px solid #dbdbdb;color:#6c6c6c;padding:5px 0 5px 10px",caption:"display:table-caption;text-align:center",center:"text-align:center",cite:"font-style:italic",dd:"margin-left:40px",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre;overflow:scroll",s:"text-decoration:line-through",small:"display:inline;font-size:0.8em",u:"text-decoration:underline"}};function o(e){for(var t=Object.create(null),a=e.split(","),i=a.length;i--;)t[a[i]]=!0;return t}e.exports=i},"8b52":function(e,t,a){"use strict";a.r(t);var i=a("d8f9"),o=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},9483:function(e,t,a){var i=a("99be");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("352073d9",i,!0,{sourceMap:!1,shadowMode:!1})},"99be":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* ==================\n      uni-app的变量\n防止插件市场用到这些，就保留了\n ==================== */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* ==================\n       theme   \n ==================== */\n/*主题色*/\n/*文字色*/\n/*背景色*/\n/* ==================\n       自定义变量   \n ==================== */\n/*utils 工具*/\n/* 颜色 */.bg-red[data-v-e8386d60]{background-color:#f33!important}.bg-purple[data-v-e8386d60]{background-color:#ff33a9!important}.bg-orange[data-v-e8386d60]{background-color:#f83!important}.bg-blue[data-v-e8386d60]{background-color:#37f!important}.color-red[data-v-e8386d60]{color:#f33!important}.color-purple[data-v-e8386d60]{color:#ff33a9!important}.color-orange[data-v-e8386d60]{color:#f83!important}.color-blue[data-v-e8386d60]{color:#37f!important}.text-black[data-v-e8386d60]{color:#000}.text-dark[data-v-e8386d60]{color:#333}.text-deep[data-v-e8386d60]{color:#555}.text-weak[data-v-e8386d60]{color:#b3b3b3}.text-white[data-v-e8386d60]{color:#fff}\n/*字体*/.f10[data-v-e8386d60]{font-size:10px}.f12[data-v-e8386d60]{font-size:12px}.f14[data-v-e8386d60]{font-size:14px}.f15[data-v-e8386d60]{font-size:15px}.f17[data-v-e8386d60]{font-size:17px}.f20[data-v-e8386d60]{font-size:20px}.f24[data-v-e8386d60]{font-size:24px}\n/* 文字对齐*/.tl[data-v-e8386d60]{text-align:left}.tc[data-v-e8386d60]{text-align:center}.tr[data-v-e8386d60]{text-align:right}\n/*浮动与清除浮动*/.fl[data-v-e8386d60]{float:left}.fr[data-v-e8386d60]{float:right}\n.fix[data-v-e8386d60]{zoom:1}.fix[data-v-e8386d60]:after{display:table;content:"";clear:both}\n\n/*显示*/.dn[data-v-e8386d60]{display:none}.di[data-v-e8386d60]{display:inline}.db[data-v-e8386d60]{display:block}.dib[data-v-e8386d60]{display:inline-block}.dt[data-v-e8386d60]{display:table}\ndiv.dib[data-v-e8386d60]{display:inline;zoom:1}\n.vm[data-v-e8386d60]{vertical-align:middle}.vib[data-v-e8386d60]{display:inline-block;vertical-align:middle}\n/*定位*/.pr[data-v-e8386d60]{position:relative}.pa[data-v-e8386d60]{position:absolute}.pf[data-v-e8386d60]{position:fixed}\n/*盒子模型*/.mt2[data-v-e8386d60]{margin-top:%?2?%}.mr2[data-v-e8386d60]{margin-right:%?2?%}.mb2[data-v-e8386d60]{margin-bottom:%?2?%}.ml2[data-v-e8386d60]{margin-left:%?2?%}.mx2[data-v-e8386d60]{margin-left:%?2?%;margin-right:%?2?%}.my2[data-v-e8386d60]{margin-top:%?2?%;margin-bottom:%?2?%}.ma2[data-v-e8386d60]{margin:%?2?%}.mt4[data-v-e8386d60]{margin-top:%?4?%}.mr4[data-v-e8386d60]{margin-right:%?4?%}.mb4[data-v-e8386d60]{margin-bottom:%?4?%}.ml4[data-v-e8386d60]{margin-left:%?4?%}.mx4[data-v-e8386d60]{margin-left:%?4?%;margin-right:%?4?%}.my4[data-v-e8386d60]{margin-top:%?4?%;margin-bottom:%?4?%}.ma4[data-v-e8386d60]{margin:%?4?%}.mt8[data-v-e8386d60]{margin-top:%?8?%}.mr8[data-v-e8386d60]{margin-right:%?8?%}.mb8[data-v-e8386d60]{margin-bottom:%?8?%}.ml8[data-v-e8386d60]{margin-left:%?8?%}.mx8[data-v-e8386d60]{margin-left:%?8?%;margin-right:%?8?%}.my8[data-v-e8386d60]{margin-top:%?8?%;margin-bottom:%?8?%}.ma8[data-v-e8386d60]{margin:%?8?%}.mt10[data-v-e8386d60]{margin-top:%?10?%}.mr10[data-v-e8386d60]{margin-right:%?10?%}.mb10[data-v-e8386d60]{margin-bottom:%?10?%}.ml10[data-v-e8386d60]{margin-left:%?10?%}.mx10[data-v-e8386d60]{margin-left:%?10?%;margin-right:%?10?%}.my10[data-v-e8386d60]{margin-top:%?10?%;margin-bottom:%?10?%}.ma10[data-v-e8386d60]{margin:%?10?%}.mt15[data-v-e8386d60]{margin-top:%?15?%}.mr15[data-v-e8386d60]{margin-right:%?15?%}.mb15[data-v-e8386d60]{margin-bottom:%?15?%}.ml15[data-v-e8386d60]{margin-left:%?15?%}.mx15[data-v-e8386d60]{margin-left:%?15?%;margin-right:%?15?%}.my15[data-v-e8386d60]{margin-top:%?15?%;margin-bottom:%?15?%}.ma15[data-v-e8386d60]{margin:%?15?%}.mt20[data-v-e8386d60]{margin-top:%?20?%}.mr20[data-v-e8386d60]{margin-right:%?20?%}.mb20[data-v-e8386d60]{margin-bottom:%?20?%}.ml20[data-v-e8386d60]{margin-left:%?20?%}.mx20[data-v-e8386d60]{margin-left:%?20?%;margin-right:%?20?%}.my20[data-v-e8386d60]{margin-top:%?20?%;margin-bottom:%?20?%}.ma20[data-v-e8386d60]{margin:%?20?%}.mt24[data-v-e8386d60]{margin-top:%?24?%}.mr24[data-v-e8386d60]{margin-right:%?24?%}.mb24[data-v-e8386d60]{margin-bottom:%?24?%}.ml24[data-v-e8386d60]{margin-left:%?24?%}.mx24[data-v-e8386d60]{margin-left:%?24?%;margin-right:%?24?%}.my24[data-v-e8386d60]{margin-top:%?24?%;margin-bottom:%?24?%}.ma24[data-v-e8386d60]{margin:%?24?%}.mt30[data-v-e8386d60]{margin-top:%?30?%}.mr30[data-v-e8386d60]{margin-right:%?30?%}.mb30[data-v-e8386d60]{margin-bottom:%?30?%}.ml30[data-v-e8386d60]{margin-left:%?30?%}.mx30[data-v-e8386d60]{margin-left:%?30?%;margin-right:%?30?%}.my30[data-v-e8386d60]{margin-top:%?30?%;margin-bottom:%?30?%}.ma30[data-v-e8386d60]{margin:%?30?%}.pt2[data-v-e8386d60]{padding-top:%?2?%}.pr2[data-v-e8386d60]{padding-right:%?2?%}.pb2[data-v-e8386d60]{padding-bottom:%?2?%}.pl2[data-v-e8386d60]{padding-left:%?2?%}.px2[data-v-e8386d60]{padding-left:%?2?%;padding-right:%?2?%}.py2[data-v-e8386d60]{padding-top:%?2?%;padding-bottom:%?2?%}.pa2[data-v-e8386d60]{padding:%?2?%}.pt4[data-v-e8386d60]{padding-top:%?4?%}.pr4[data-v-e8386d60]{padding-right:%?4?%}.pb4[data-v-e8386d60]{padding-bottom:%?4?%}.pl4[data-v-e8386d60]{padding-left:%?4?%}.px4[data-v-e8386d60]{padding-left:%?4?%;padding-right:%?4?%}.py4[data-v-e8386d60]{padding-top:%?4?%;padding-bottom:%?4?%}.pa4[data-v-e8386d60]{padding:%?4?%}.pt8[data-v-e8386d60]{padding-top:%?8?%}.pr8[data-v-e8386d60]{padding-right:%?8?%}.pb8[data-v-e8386d60]{padding-bottom:%?8?%}.pl8[data-v-e8386d60]{padding-left:%?8?%}.px8[data-v-e8386d60]{padding-left:%?8?%;padding-right:%?8?%}.py8[data-v-e8386d60]{padding-top:%?8?%;padding-bottom:%?8?%}.pa8[data-v-e8386d60]{padding:%?8?%}.pt10[data-v-e8386d60]{padding-top:%?10?%}.pr10[data-v-e8386d60]{padding-right:%?10?%}.pb10[data-v-e8386d60]{padding-bottom:%?10?%}.pl10[data-v-e8386d60]{padding-left:%?10?%}.px10[data-v-e8386d60]{padding-left:%?10?%;padding-right:%?10?%}.py10[data-v-e8386d60]{padding-top:%?10?%;padding-bottom:%?10?%}.pa10[data-v-e8386d60]{padding:%?10?%}.pt15[data-v-e8386d60]{padding-top:%?15?%}.pr15[data-v-e8386d60]{padding-right:%?15?%}.pb15[data-v-e8386d60]{padding-bottom:%?15?%}.pl15[data-v-e8386d60]{padding-left:%?15?%}.px15[data-v-e8386d60]{padding-left:%?15?%;padding-right:%?15?%}.py15[data-v-e8386d60]{padding-top:%?15?%;padding-bottom:%?15?%}.pa15[data-v-e8386d60]{padding:%?15?%}.pt20[data-v-e8386d60]{padding-top:%?20?%}.pr20[data-v-e8386d60]{padding-right:%?20?%}.pb20[data-v-e8386d60]{padding-bottom:%?20?%}.pl20[data-v-e8386d60]{padding-left:%?20?%}.px20[data-v-e8386d60]{padding-left:%?20?%;padding-right:%?20?%}.py20[data-v-e8386d60]{padding-top:%?20?%;padding-bottom:%?20?%}.pa20[data-v-e8386d60]{padding:%?20?%}.pt24[data-v-e8386d60]{padding-top:%?24?%}.pr24[data-v-e8386d60]{padding-right:%?24?%}.pb24[data-v-e8386d60]{padding-bottom:%?24?%}.pl24[data-v-e8386d60]{padding-left:%?24?%}.px24[data-v-e8386d60]{padding-left:%?24?%;padding-right:%?24?%}.py24[data-v-e8386d60]{padding-top:%?24?%;padding-bottom:%?24?%}.pa24[data-v-e8386d60]{padding:%?24?%}.pt30[data-v-e8386d60]{padding-top:%?30?%}.pr30[data-v-e8386d60]{padding-right:%?30?%}.pb30[data-v-e8386d60]{padding-bottom:%?30?%}.pl30[data-v-e8386d60]{padding-left:%?30?%}.px30[data-v-e8386d60]{padding-left:%?30?%;padding-right:%?30?%}.py30[data-v-e8386d60]{padding-top:%?30?%;padding-bottom:%?30?%}.pa30[data-v-e8386d60]{padding:%?30?%}\n/*按钮禁用*/.disabled[data-v-e8386d60]{outline:0 none;cursor:default!important;opacity:.4;filter:alpha(opacity=40);-ms-pointer-events:none;pointer-events:none}\n/**\n * \n * 自定义class工具\n * \n*/.pad[data-v-e8386d60]{padding:0 %?30?%}.page_box[data-v-e8386d60]{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;overflow-x:hidden;background:#f6f6f6}.scroll-box[data-v-e8386d60]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:100%;position:relative}.content_box[data-v-e8386d60]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow-y:auto}\n/*单行文本溢出省略号*/.one-t[data-v-e8386d60]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-transition:all linear .2s;transition:all linear .2s}\n/*多行文本溢出省略号*/.more-t[data-v-e8386d60]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;-webkit-transition:all linear .2s;transition:all linear .2s}\n/* ==================\n          flex布局(colorui里面也有相关基础样式)\n ==================== */\n/* x水平排列*/.x-f[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}\n/*x两端且水平居中*/.x-bc[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}\n/*x平分且水平居中*/.x-ac[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center}\n/*x水平靠上对齐*/.x-start[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}\n/*x水平靠下对齐*/.x-end[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}\n/*上下左右居中*/.x-c[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}\n/*y竖直靠左*/.y-start[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}\n/*y竖直靠右*/.y-end[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}\n/*y竖直居中*/.y-f[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.y-b[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}\n/*y竖直两端居中*/.y-bc[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}\n/* ==================\n     flex布局  \n ==================== */\n/* ==================\n      渐变色 \n ==================== */\n/**\n* 溢出省略号\n* @param {Number} 行数\n*/\n/* shopro主题颜色 */\n/* 深黑 */#dark-theme[data-v-e8386d60]{background:#000}#dark-theme .bColor[data-v-e8386d60]{background:#333;color:#999}#dark-theme .borderColor[data-v-e8386d60]{border-color:#999}\n/* 粉红 */#red-theme[data-v-e8386d60]{background:#f9e5ee}#red-theme .bColor[data-v-e8386d60]{background:#f9e5ee;color:#8e5a54}#red-theme .borderColor[data-v-e8386d60]{border-color:#8e5a54}\n/* 橘黄 */#yellow-theme[data-v-e8386d60]{background:#f6e1c9}#yellow-theme .bColor[data-v-e8386d60]{background:#f6e1c9;color:#8c6031}#yellow-theme .borderColor[data-v-e8386d60]{border-color:#8c6031}*[data-v-e8386d60]{padding:0;margin:0}uni-page-body[data-v-e8386d60]{overflow:hidden}.kefu_container[data-v-e8386d60]{height:calc(100vh - var(--window-top));overflow:hidden;background-color:#f8fbfb}.error_tips[data-v-e8386d60]{position:fixed;top:var(--window-top);width:100%;height:%?80?%;font-size:%?30?%;line-height:%?80?%;background:rgba(231,76,60,.7);z-index:999;color:#fff;text-align:center}.notice[data-v-e8386d60]{position:fixed;top:var(--window-top);width:100%;font-size:%?26?%;font-weight:400;color:#cc953b;line-height:%?40?%;padding:%?16?%;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(252,248,227,.7);color:#c09853;z-index:999}.close_notice[data-v-e8386d60]{width:%?100?%;font-size:%?40?%}.mask[data-v-e8386d60]{position:fixed;width:100%;height:100%;background:rgba(0,0,0,.3);z-index:11}.select_model[data-v-e8386d60]{background-color:#f2f2f2;position:fixed;bottom:%?0?%;z-index:998;width:100%;-webkit-border-top-left-radius:%?20?%;border-top-left-radius:%?20?%;-webkit-border-top-right-radius:%?20?%;border-top-right-radius:%?20?%}.select_model .select_model--head[data-v-e8386d60]{background-color:#fff;height:%?82?%;padding:0 %?26?%;-webkit-border-radius:%?20?% %?20?% 0 0;border-radius:%?20?% %?20?% 0 0}.select_model .select_model--head .select-title-box[data-v-e8386d60]{line-height:%?82?%}.select_model .select_model--head .select-title-box .title-text[data-v-e8386d60]{font-size:%?30?%;font-family:PingFang SC;font-weight:500;color:#333;line-height:%?76?%}.select_model .select_model--head .select-title-box .title-line[data-v-e8386d60]{width:%?120?%;height:%?6?%;background:#e6b873}.close_select[data-v-e8386d60]{font-size:%?40?%;padding:%?20?% 0;color:#e0e0e0}.project_list[data-v-e8386d60]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow-x:hidden;height:%?440?%;padding:%?20?% 0}.project_item[data-v-e8386d60]{background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?16?% %?8?% %?16?% %?16?%;margin:%?10?% %?20?%;-webkit-border-radius:%?20?%;border-radius:%?20?%}.project_item[data-v-e8386d60]:last-child{margin-bottom:0}.project_item uni-image[data-v-e8386d60]{width:%?160?%;height:%?160?%;min-width:%?160?%}.project_item_body[data-v-e8386d60]{height:%?170?%;width:100%;margin:0 %?16?%;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.project_item_title[data-v-e8386d60]{font-size:%?26?%;line-height:%?32?%;color:#333}.project_item_note[data-v-e8386d60]{font-size:%?26?%;color:#999;line-height:%?32?%;margin-top:%?6?%}.project_item_price .price[data-v-e8386d60]{color:#e1212b;font-size:%?28?%}.project_item_price .price[data-v-e8386d60]::before{content:"￥";font-size:%?20?%}.project_item_price .unit[data-v-e8386d60]{color:#999;font-size:%?22?%;margin-left:%?20?%}.select_model_no_data[data-v-e8386d60]{font-size:%?30?%;height:100%;background:#fff;color:#999;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.chat_wrapper[data-v-e8386d60]{background-color:#f8fbfb;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;color:#181818}.chat_wrapper uni-scroll-view[data-v-e8386d60]{height:100%}.chat_wrapper .status[data-v-e8386d60]{width:100%;margin:%?20?%;text-align:center;height:%?60?%;line-height:%?60?%}.chat_wrapper .status uni-text[data-v-e8386d60]{font-size:%?24?%;background:#ccc;color:#fff;-webkit-border-radius:%?17?%;border-radius:%?17?%;padding:%?6?% %?20?%;line-height:%?24?%}.message-item[data-v-e8386d60]{-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;margin:%?20?%}.message-item .head-img[data-v-e8386d60]{width:%?70?%;height:%?70?%;-webkit-border-radius:50%;border-radius:50%}.message__left[data-v-e8386d60]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.message__right[data-v-e8386d60]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.chat_wrapper .bubble[data-v-e8386d60]{font-size:%?26?%;position:relative;display:inline-block;margin-bottom:%?16?%;padding:%?20?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.chat_wrapper .bubble.me[data-v-e8386d60]{margin-right:%?28?%;color:#fff;background-color:#e6b873;word-wrap:break-word;word-break:break-all}.chat_wrapper .bubble.you[data-v-e8386d60]{margin-left:%?28?%;color:#181818;background-color:#fff;word-wrap:break-word;word-break:break-all}.chat_wrapper .bubble[data-v-e8386d60]:before{position:absolute;top:%?38?%;display:block;width:%?16?%;height:%?12?%;content:"\\00a0";-webkit-transform:rotate(29deg) skew(-35deg);transform:rotate(29deg) skew(-35deg)}.chat_wrapper .bubble.you[data-v-e8386d60]:before{left:%?-6?%;background-color:#fff}.chat_wrapper .bubble.me[data-v-e8386d60]:before{right:%?-6?%;background-color:#e6b873}.chat_wrapper .bubble uni-image[data-v-e8386d60]{max-height:%?400?%!important;width:%?200?%;vertical-align:bottom}.chat_wrapper .bubble .emoji[data-v-e8386d60]{display:inline-block;width:%?120?%;min-height:%?50?%}.content_wrapper .write[data-v-e8386d60]{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#f2f2f2;-webkit-box-shadow:0 %?-2?% 0 #e5e5e5;box-shadow:0 %?-2?% 0 #e5e5e5;width:100%;padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:fixed;bottom:%?0?%;z-index:22}#wrapper_footer[data-v-e8386d60]{display:block;clear:both}.write_right[data-v-e8386d60]{-webkit-box-flex:2;-webkit-flex:2;flex:2;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.widget_textarea[data-v-e8386d60]{-webkit-box-flex:7;-webkit-flex:7;flex:7;background-color:#fff;-webkit-border-radius:%?20?%;border-radius:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?%}.content_wrapper .toolbar_icon[data-v-e8386d60]{display:inline-block;cursor:pointer;vertical-align:middle;width:%?56?%;height:%?56?%;content:"";margin-left:%?16?%}.kefu_message[data-v-e8386d60]{width:100%;outline:none;border:none;resize:none;-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;line-height:%?36?%;font-size:%?28?%;color:#333}.kefu_message[data-v-e8386d60]::-webkit-scrollbar{width:%?4?%}.kefu_message[data-v-e8386d60]::-webkit-scrollbar-track{background-color:#fff;-webkit-border-radius:2em;-moz-border-radius:2em;border-radius:2em}.kefu_message[data-v-e8386d60]::-webkit-scrollbar-thumb{background-color:#e6e6e6;-webkit-border-radius:2em;-moz-border-radius:2em;border-radius:2em}.footer_div[data-v-e8386d60]{position:fixed;bottom:%?0?%;z-index:22;background-color:#fff;-webkit-box-shadow:0 %?8?% %?10?% rgba(0,0,0,.1);box-shadow:0 %?8?% %?10?% rgba(0,0,0,.1);width:100%;-webkit-animation:show_footer_div-data-v-e8386d60 .1s;animation:show_footer_div-data-v-e8386d60 .1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;padding-top:%?12?%;-webkit-box-sizing:border-box;box-sizing:border-box;height:170px;overflow-y:auto;overflow-x:hidden}@-webkit-keyframes show_footer_div-data-v-e8386d60{from{height:0}to{height:170px}}@keyframes show_footer_div-data-v-e8386d60{from{height:0}to{height:170px}}.footer_div uni-image[data-v-e8386d60]{height:%?51?%;width:%?51?%;padding:%?12?%}.send_btn[data-v-e8386d60]{margin-left:%?28?%;background:#00b0ff;color:#fff;border-color:#00b0ff;outline:none;padding:%?10?% %?20?%;font-size:%?24?%;line-height:1.5;-webkit-border-radius:%?6?%;border-radius:%?6?%}.send_btn[data-v-e8386d60]::after{border:none}.send_btn_hover[data-v-e8386d60]{background-color:#19baff}.toolbar[data-v-e8386d60]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.toolbar_item[data-v-e8386d60]{margin-top:%?20?%;width:25%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.toolbar_item .tool-img[data-v-e8386d60]{width:%?100?%;height:%?100?%}.toolbar_item uni-view[data-v-e8386d60]{display:block;width:100%;font-size:%?26?%;line-height:%?34?%;text-align:center;color:#333}.leave_message[data-v-e8386d60]{padding:0 %?20?% %?50?%;background-color:#fff;border-top:%?1?% solid hsla(0,0%,87.5%,.5);position:relative}.leave_message .form-group .label-title[data-v-e8386d60]{font-size:%?28?%;font-family:PingFang SC;font-weight:700;color:#333;line-height:%?100?%}.leave_message .form-group .form-control[data-v-e8386d60]{width:%?710?%;height:%?84?%;background:#f9fafb;-webkit-border-radius:%?20?%;border-radius:%?20?%;padding:%?12?% %?24?%;color:#555;font-size:%?26?%}.leave_success[data-v-e8386d60]{position:absolute;width:%?600?%;height:%?74?%;background:-webkit-gradient(linear,left top,right top,from(#e9b461),to(#eecc89));background:-webkit-linear-gradient(left,#e9b461,#eecc89);background:linear-gradient(90deg,#e9b461,#eecc89);-webkit-border-radius:%?37?%;border-radius:%?37?%;font-size:%?28?%;font-family:PingFang SC;font-weight:400;color:#fff;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:%?-300?%}',""]),e.exports=t},"9a49":function(e,t,a){"use strict";var i=a("370c"),o=a.n(i);o.a},a43c:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,"@-webkit-keyframes _show-data-v-21b2b044{0%{opacity:0}100%{opacity:1}}@keyframes _show-data-v-21b2b044{0%{opacity:0}100%{opacity:1}}\n\n\n\n",""]),e.exports=t},b0b2:function(e,t,a){"use strict";a("ac1f"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("484f"),o=[{title:"[zy]",src:"/emoji/1.png"},{title:"[zm]",src:"/emoji/2.png"},{title:"[jy]",src:"/emoji/3.png"},{title:"[jyb]",src:"/emoji/4.png"},{title:"[bx]",src:"/emoji/5.png"},{title:"[kzn]",src:"/emoji/6.png"},{title:"[gg]",src:"/emoji/7.png"},{title:"[ll]",src:"/emoji/8.png"},{title:"[jyll]",src:"/emoji/9.png"},{title:"[o]",src:"/emoji/10.png"},{title:"[yz]",src:"/emoji/11.png"},{title:"[wx]",src:"/emoji/12.png"},{title:"[zyb]",src:"/emoji/13.png"},{title:"[tp]",src:"/emoji/14.png"},{title:"[wxb]",src:"/emoji/15.png"},{title:"[zyc]",src:"/emoji/16.png"},{title:"[llb]",src:"/emoji/17.png"},{title:"[xm]",src:"/emoji/18.png"},{title:"[qz]",src:"/emoji/19.png"},{title:"[zmb]",src:"/emoji/20.png"},{title:"[kx]",src:"/emoji/21.png"},{title:"[mm]",src:"/emoji/22.png"},{title:"[bz]",src:"/emoji/23.png"},{title:"[bkx]",src:"/emoji/24.png"},{title:"[mg]",src:"/emoji/25.png"},{title:"[pz]",src:"/emoji/26.png"},{title:"[pzb]",src:"/emoji/27.png"},{title:"[wxc]",src:"/emoji/28.png"},{title:"[jyc]",src:"/emoji/29.png"},{title:"[jyd]",src:"/emoji/30.png"},{title:"[dm]",src:"/emoji/31.png"},{title:"[tpb]",src:"/emoji/32.png"},{title:"[tpc]",src:"/emoji/33.png"},{title:"[tpd]",src:"/emoji/34.png"},{title:"[ly]",src:"/emoji/35.png"},{title:"[zyd]",src:"/emoji/36.png"}],s=i.BASE_URL.split("://"),n={baseURL:s[1],https_switch:!0,expression:o};t.default=n},bdb5:function(e,t,a){"use strict";a.r(t);var i=a("7313"),o=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},c5fe:function(e,t,a){"use strict";a.r(t);var i=a("d2f5"),o=a("8b52");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("9a49");var n,r=a("f0c5"),d=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"21b2b044",null,!1,i["a"],n);t["default"]=d.exports},d2f5:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[e.nodes.length?e._e():e._t("default"),a("v-uni-view",{style:e.showAm+(e.selectable?";user-select:text;-webkit-user-select:text":""),attrs:{id:"_top"}},[a("div",{attrs:{id:"rtf"+e.uid}})])],2)},s=[]},d8f9:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("caad"),a("c975"),a("acd8"),a("e25e"),a("ac1f"),a("2532"),a("466d"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("b85c")),s=uni.getSystemInfoSync().windowWidth,n=a("8092"),r={name:"parser",data:function(){return{uid:this._uid,showAm:"",nodes:[]}},props:{html:String,autopause:{type:Boolean,default:!0},autoscroll:Boolean,autosetTitle:{type:Boolean,default:!0},domain:String,lazyLoad:Boolean,selectable:Boolean,tagStyle:Object,showWithAnimation:Boolean,useAnchor:Boolean},watch:{html:function(e){this.setContent(e)}},created:function(){this.imgList=[],this.imgList.each=function(e){for(var t=0,a=this.length;t<a;t++)this.setItem(t,e(this[t],t,this))},this.imgList.setItem=function(e,t){if(void 0!=e&&t){if(0==t.indexOf("http")&&this.includes(t)){for(var a,i=t.split("://")[0],o=i.length;a=t[o];o++){if("/"==a&&"/"!=t[o-1]&&"/"!=t[o+1])break;i+=Math.random()>.5?a.toUpperCase():a}return i+=t.substr(o),this[e]=i}if(this[e]=t,t.includes("data:image")){var s=t.match(/data:image\/(\S+?);(\S+?),(.+)/);if(!s)return}}}},mounted:function(){this.document=document.getElementById("rtf"+this._uid),this.html&&this.setContent(this.html)},beforeDestroy:function(){this._observer&&this._observer.disconnect(),this.imgList.each((function(e){})),clearInterval(this._timer)},methods:{setContent:function(e,t){var a=this;if(e){var i=document.createElement("div");t?this.rtf?this.rtf.appendChild(i):this.rtf=i:(this.rtf&&this.rtf.parentNode.removeChild(this.rtf),this.rtf=i),i.innerHTML=this._handleHtml(e,t);for(var r,d=this.rtf.getElementsByTagName("style"),l=0;r=d[l++];)r.innerHTML=r.innerHTML.replace(/body/g,"#rtf"+this._uid),r.setAttribute("scoped","true");!this._observer&&this.lazyLoad&&IntersectionObserver&&(this._observer=new IntersectionObserver((function(e){for(var t,i=0;t=e[i++];)t.isIntersecting&&(t.target.src=t.target.getAttribute("data-src"),t.target.removeAttribute("data-src"),a._observer.unobserve(t.target))}),{rootMargin:"500px 0px 500px 0px"}));var c=this,g=this.rtf.getElementsByTagName("title");g.length&&this.autosetTitle&&uni.setNavigationBarTitle({title:g[0].innerText}),this.imgList.length=0;for(var u,f=this.rtf.getElementsByTagName("img"),p=0,m=0;u=f[p];p++){parseInt(u.style.width||u.getAttribute("width"))>s&&(u.style.height="auto");var b=u.getAttribute("src");this.domain&&b&&("/"==b[0]?"/"==b[1]?u.src=(this.domain.includes("://")?this.domain.split("://")[0]:"")+":"+b:u.src=this.domain+b:b.includes("://")||(u.src=this.domain+"/"+b)),u.hasAttribute("ignore")||"A"==u.parentElement.nodeName||(u.i=m++,c.imgList.push(u.src||u.getAttribute("data-src")),u.onclick=function(){var e=!0;this.ignore=function(){return e=!1},c.$emit("imgtap",this),e&&uni.previewImage({current:this.i,urls:c.imgList})}),u.onerror=function(){n.errorImg&&(c.imgList[this.i]=this.src=n.errorImg),c.$emit("error",{source:"img",target:this})},c.lazyLoad&&this._observer&&u.src&&0!=u.i&&(u.setAttribute("data-src",u.src),u.removeAttribute("src"),this._observer.observe(u))}var v,h=this.rtf.getElementsByTagName("a"),w=(0,o.default)(h);try{for(w.s();!(v=w.n()).done;){var _=v.value;_.onclick=function(){var e=!0,t=this.getAttribute("href");if(c.$emit("linkpress",{href:t,ignore:function(){return e=!1}}),e&&t)if("#"==t[0])c.useAnchor&&c.navigateTo({id:t.substr(1)});else{if(0==t.indexOf("http")||0==t.indexOf("//"))return!0;uni.navigateTo({url:t})}return!1}}}catch($){w.e($)}finally{w.f()}var k=this.rtf.getElementsByTagName("video");c.videoContexts=k;for(var x,y=0;x=k[y++];)x.style.maxWidth="100%",x.onerror=function(){c.$emit("error",{source:"video",target:this})},x.onplay=function(){if(c.autopause)for(var e,t=0;e=c.videoContexts[t++];)e!=this&&e.pause()};var C,j,T=this.rtf.getElementsByTagName("audio"),M=(0,o.default)(T);try{for(M.s();!(C=M.n()).done;){var z=C.value;z.onerror=function(){c.$emit("error",{source:"audio",target:this})}}}catch($){M.e($)}finally{M.f()}if(this.autoscroll){var S,L=this.rtf.getElementsByTagName("table"),I=(0,o.default)(L);try{for(I.s();!(S=I.n()).done;){var B=S.value,E=document.createElement("div");E.style.overflow="scroll",B.parentNode.replaceChild(E,B),E.appendChild(B)}}catch($){I.e($)}finally{I.f()}}t||this.document.appendChild(this.rtf),this.$nextTick((function(){a.nodes=[1],a.$emit("load")})),setTimeout((function(){return a.showAm=""}),500),clearInterval(this._timer),this._timer=setInterval((function(){a.rect=a.rtf.getBoundingClientRect(),a.rect.height==j&&(a.$emit("ready",a.rect),clearInterval(a._timer)),j=a.rect.height}),350),this.showWithAnimation&&!t&&(this.showAm="animation:_show .5s")}else this.rtf&&!t&&this.rtf.parentNode.removeChild(this.rtf)},getText:function(){arguments.length>0&&void 0!==arguments[0]||this.nodes;var e="";return e=this.rtf.innerText,e},in:function(e){e.page&&e.selector&&e.scrollTop&&(this._in=e)},navigateTo:function(e){var t=this;if(!this.useAnchor)return e.fail&&e.fail("Anchor is disabled");var a=" ",i=uni.createSelectorQuery().in(this._in?this._in.page:this).select((this._in?this._in.selector:"#_top")+(e.id?"".concat(a,"#").concat(e.id,",").concat(this._in?this._in.selector:"#_top").concat(a,".").concat(e.id):"")).boundingClientRect();this._in?i.select(this._in.selector).scrollOffset().select(this._in.selector).boundingClientRect():i.selectViewport().scrollOffset(),i.exec((function(a){if(!a[0])return e.fail&&e.fail("Label not found");var i=a[1].scrollTop+a[0].top-(a[2]?a[2].top:0)+(e.offset||0);t._in?t._in.page[t._in.scrollTop]=i:uni.pageScrollTo({scrollTop:i,duration:300}),e.success&&e.success()}))},getVideoContext:function(e){if(!e)return this.videoContexts;for(var t=this.videoContexts.length;t--;)if(this.videoContexts[t].id==e)return this.videoContexts[t]},_handleHtml:function(e,t){if(!t){var a="<style scoped>@keyframes _show{0%{opacity:0}100%{opacity:1}}img{max-width:100%}";for(var i in n.userAgentStyles)a+="".concat(i,"{").concat(n.userAgentStyles[i],"}");for(i in this.tagStyle)a+="".concat(i,"{").concat(this.tagStyle[i],"}");a+="</style>",e=a+e}return e.includes("rpx")&&(e=e.replace(/[0-9.]+\s*rpx/g,(function(e){return parseFloat(e)*s/750+"px"}))),e}}};t.default=r},f1b8:function(e,t,a){"use strict";var i=a("9483"),o=a.n(i);o.a},f85e:function(e,t,a){"use strict";a.r(t);var i=a("312b"),o=a("bdb5");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("f1b8");var n,r=a("f0c5"),d=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"e8386d60",null,!1,i["a"],n);t["default"]=d.exports}}]);